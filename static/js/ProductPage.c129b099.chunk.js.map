{"version":3,"file":"static/js/ProductPage.c129b099.chunk.js","mappings":"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","sources":["query/Product.query.js","route/ProductPage/ProductPage.styled.js","route/ProductPage/ProductPage.jsx"],"sourcesContent":["import { gql } from \"@apollo/client\";\r\n\r\nconst GET_PRODUCT = gql`\r\n\tquery getProductById($productId: String!) {\r\n\t\tproduct(id: $productId) {\r\n\t\t\tid\r\n\t\t\tbrand\r\n\t\t\tname\r\n\t\t\tgallery\r\n\t\t\tinStock\r\n\t\t\tprices {\r\n\t\t\t\tcurrency {\r\n\t\t\t\t\tsymbol\r\n\t\t\t\t}\r\n\t\t\t\tamount\r\n\t\t\t}\r\n\t\t\tcategory\r\n\t\t\tdescription\r\n\t\t\tattributes {\r\n\t\t\t\tid\r\n\t\t\t\tname\r\n\t\t\t\ttype\r\n\t\t\t\titems {\r\n\t\t\t\t\tdisplayValue\r\n\t\t\t\t\tvalue\r\n\t\t\t\t\tid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport default GET_PRODUCT;\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.section`\r\n\tdisplay: flex;\r\n\tpadding-top: 160px;\r\n`;\r\n\r\nexport const GalleryList = styled.ul`\r\n\theight: 511px;\r\n\twidth: 79px;\r\n\tdisplay: block;\r\n\toverflow: auto;\r\n\t::-webkit-scrollbar {\r\n\t\tdisplay: none;\r\n\t}\r\n`;\r\n\r\nexport const GalleryItem = styled.li`\r\n\twidth: 79px;\r\n\theight: 80px;\r\n\tcursor: pointer;\r\n\t&: not(: last-child) {\r\n\t\tmargin-bottom: 40px;\r\n\t} ;\r\n`;\r\n\r\nexport const GalleryImages = styled.img`\r\n\twidth: 79px;\r\n\theight: 80px;\r\n\tobject-fit: contain;\r\n`;\r\n\r\nexport const ImageMain = styled.img`\r\n\tmargin: 0 100px 0 40px;\r\n\twidth: 610px;\r\n\theight: 511px;\r\n\tobject-fit: contain;\r\n`;\r\n\r\nexport const ProductDescription = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n`;\r\n\r\nexport const Brand = styled.h3`\r\n\tmargin-bottom: 16px;\r\n\tfont-weight: 600;\r\n\tfont-size: 30px;\r\n\tline-height: 27px;\r\n`;\r\n\r\nexport const Name = styled.p`\r\n\tmargin-bottom: 19px;\r\n\tfont-weight: 400;\r\n\tfont-size: 30px;\r\n\tline-height: 27px;\r\n`;\r\n\r\nexport const Price = styled.p`\r\n\tmargin: 38px 0 10px;\r\n\tfont-weight: 700;\r\n\tfont-size: 18px;\r\n\tline-height: 18px;\r\n`;\r\n\r\nexport const PriceValue = styled.p`\r\n\tmargin-bottom: 20px;\r\n\tfont-weight: 700;\r\n\tfont-size: 24px;\r\n\tline-height: 18px;\r\n`;\r\n\r\nexport const Button = styled.button`\r\n\tmargin-bottom: 40px;\r\n\twidth: 292px;\r\n\theight: 52px;\r\n\tfont-weight: 600;\r\n\tfont-size: 16px;\r\n\tline-height: 120%;\r\n\tcolor: #fff;\r\n\tbackground-color: var(--accent-color);\r\n\tborder: 0;\r\n\tcursor: pointer;\r\n`;\r\n\r\nexport const Description = styled.p`\r\n\twidth: 292px;\r\n\tfont-weight: 400;\r\n\tfont-size: 16px;\r\n\tline-height: 159.96%;\r\n`;\r\n","import { PureComponent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport withRouter from \"route/withRouter\";\r\nimport client from \"query/apolloClient\";\r\nimport GET_PRODUCT from \"query/Product.query\";\r\nimport { addToCart } from \"store/cartSlice\";\r\nimport ProductAttributes from \"component/ProductAttributes\";\r\nimport {\r\n\tContainer,\r\n\tGalleryList,\r\n\tGalleryItem,\r\n\tGalleryImages,\r\n\tImageMain,\r\n\tProductDescription,\r\n\tBrand,\r\n\tName,\r\n\tPrice,\r\n\tPriceValue,\r\n\tButton,\r\n\tDescription,\r\n} from \"./ProductPage.styled\";\r\n\r\nconst mapStateToProps = state => ({\r\n\tcurrentCurrency: state.cart.currentCurrency,\r\n\tproducts: state.cart.products,\r\n});\r\n\r\nexport class ProductPage extends PureComponent {\r\n\tstate = { product: {}, currentImage: \"\", currentAttributes: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchProduct();\r\n\t}\r\n\r\n\tasync fetchProduct() {\r\n\t\tconst result = await client.query({\r\n\t\t\tquery: GET_PRODUCT,\r\n\t\t\tvariables: {\r\n\t\t\t\tproductId: this.props.router.params.productId,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tthis.setState({ product: result.data.product });\r\n\t}\r\n\r\n\tcurrentImageClick = event => {\r\n\t\tthis.setState({ currentImage: event.target.currentSrc });\r\n\t};\r\n\r\n\thandleClickAttribute = (name, value) => {\r\n\t\tconst currentAttributes = [...this.state.currentAttributes];\r\n\t\tcurrentAttributes?.some(currentAttribute => Object.keys(currentAttribute)[0] === name)\r\n\t\t\t? currentAttributes.forEach((currentAttribute, index) => {\r\n\t\t\t\t\tObject.keys(currentAttribute)[0] === name && currentAttribute[name] === value\r\n\t\t\t\t\t\t? currentAttributes.splice(index, 1)\r\n\t\t\t\t\t\t: Object.keys(currentAttributes[index])[0] === name &&\r\n\t\t\t\t\t\t  currentAttributes.splice(index, 1, { ...currentAttributes[index], [name]: value });\r\n\t\t\t  })\r\n\t\t\t: currentAttributes.push({ [name]: value });\r\n\r\n\t\tthis.setState({ currentAttributes: currentAttributes });\r\n\t};\r\n\r\n\taddToCart() {\r\n\t\tconst { product, currentAttributes } = this.state;\r\n\t\tlet currentProducts = [...this.props.products];\r\n\t\tlet counter = 0;\r\n\r\n\t\tif (product.attributes.length === currentAttributes.length) {\r\n\t\t\tcurrentProducts.some(currentProduct => currentProduct.id === product.id)\r\n\t\t\t\t? currentProducts.forEach((currentProduct, index) => {\r\n\t\t\t\t\t\tif (currentProduct.id === product.id) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tJSON.stringify(\r\n\t\t\t\t\t\t\t\t\t[...currentProduct.currentAttributes].sort((a, b) =>\r\n\t\t\t\t\t\t\t\t\t\tObject.keys(a)[0].localeCompare(Object.keys(b)[0]),\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t).slice(0, -3) ===\r\n\t\t\t\t\t\t\t\tJSON.stringify(\r\n\t\t\t\t\t\t\t\t\t[...currentAttributes].sort((a, b) => Object.keys(a)[0].localeCompare(Object.keys(b)[0])),\r\n\t\t\t\t\t\t\t\t).slice(0, -3)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tcurrentProducts.splice(index, 1, {\r\n\t\t\t\t\t\t\t\t\t...currentProducts[index],\r\n\t\t\t\t\t\t\t\t\tquantity: currentProducts[index].quantity + 1,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  })\r\n\t\t\t\t: currentProducts.push({\r\n\t\t\t\t\t\tid: product.id,\r\n\t\t\t\t\t\tbrand: product.brand,\r\n\t\t\t\t\t\tname: product.name,\r\n\t\t\t\t\t\tattributes: product.attributes,\r\n\t\t\t\t\t\tcurrentAttributes: currentAttributes,\r\n\t\t\t\t\t\tprices: product.prices,\r\n\t\t\t\t\t\timage: product.gallery[0],\r\n\t\t\t\t\t\tquantity: 1,\r\n\t\t\t\t  });\r\n\r\n\t\t\tconst productsIdUnique = [];\r\n\t\t\tcurrentProducts.forEach(\r\n\t\t\t\tcurrentProduct => currentProduct.id === product.id && productsIdUnique.push(currentProduct.id),\r\n\t\t\t);\r\n\r\n\t\t\tcounter === productsIdUnique.length &&\r\n\t\t\t\tcurrentProducts.push({\r\n\t\t\t\t\tid: product.id,\r\n\t\t\t\t\tbrand: product.brand,\r\n\t\t\t\t\tname: product.name,\r\n\t\t\t\t\tattributes: product.attributes,\r\n\t\t\t\t\tcurrentAttributes: currentAttributes,\r\n\t\t\t\t\tprices: product.prices,\r\n\t\t\t\t\timage: product.gallery[0],\r\n\t\t\t\t\tquantity: 1,\r\n\t\t\t\t});\r\n\r\n\t\t\tthis.props.addToCart(currentProducts);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { gallery, brand, name, attributes, prices, description } = this.state.product;\r\n\t\tconst { currentCurrency } = this.props;\r\n\t\tconst { currentImage, currentAttributes } = this.state;\r\n\t\tconst currentAmount = prices?.find(({ currency }) => currency.symbol === currentCurrency);\r\n\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<GalleryList>\r\n\t\t\t\t\t{gallery?.map((image, index) => (\r\n\t\t\t\t\t\t<GalleryItem key={index}>\r\n\t\t\t\t\t\t\t<GalleryImages src={image} onClick={this.currentImageClick} />\r\n\t\t\t\t\t\t</GalleryItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</GalleryList>\r\n\t\t\t\t{gallery && <ImageMain src={currentImage || gallery[0]} />}\r\n\t\t\t\t<ProductDescription>\r\n\t\t\t\t\t<Brand>{brand}</Brand>\r\n\t\t\t\t\t<Name>{name}</Name>\r\n\t\t\t\t\t<ProductAttributes\r\n\t\t\t\t\t\tattributes={attributes}\r\n\t\t\t\t\t\tcurrentAttributes={currentAttributes}\r\n\t\t\t\t\t\thandleClickAttribute={this.handleClickAttribute}\r\n\t\t\t\t\t\torigin={\"page\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Price>Price:</Price>\r\n\t\t\t\t\t<PriceValue>\r\n\t\t\t\t\t\t{currentCurrency}\r\n\t\t\t\t\t\t{currentAmount?.amount}\r\n\t\t\t\t\t</PriceValue>\r\n\t\t\t\t\t<Button onClick={() => this.addToCart()}>ADD TO CART</Button>\r\n\t\t\t\t\t<Description>{description}</Description>\r\n\t\t\t\t</ProductDescription>\r\n\t\t\t</Container>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, { addToCart })(withRouter(ProductPage));\r\n"],"names":["gql","Container","styled","GalleryList","GalleryItem","GalleryImages","ImageMain","ProductDescription","Brand","Name","Price","PriceValue","Button","Description","ProductPage","state","product","currentImage","currentAttributes","currentImageClick","event","setState","target","currentSrc","handleClickAttribute","name","value","some","currentAttribute","Object","keys","forEach","index","splice","push","this","fetchProduct","client","query","GET_PRODUCT","variables","productId","props","router","params","result","data","currentProducts","products","counter","attributes","length","currentProduct","id","JSON","stringify","sort","a","b","localeCompare","slice","quantity","brand","prices","image","gallery","productsIdUnique","addToCart","description","currentCurrency","currentAmount","find","currency","symbol","map","src","onClick","ProductAttributes","origin","amount","PureComponent","connect","cart","withRouter"],"sourceRoot":""}